## RTP 프로토콜

### 실시간 서비스로 멀티미디어 서비스 환경에 맞는 프로토콜 고려

**UDP** - 사용하면 빠르지만 패킷의 순서가 고려되지않아, 음질이나 소음에 대해 취약

**TCP** - 패킷의 순서와 신뢰성을 강조하여 재전송등 여러 제약때문에 실시간 서비스에 차질이 생김.

→ 가장 현실적인 대안인 UDP에 순서번호 기능을 추가하여 순서대로 전송을 하는 방법에 기반

### RTP 프로토콜

Real-Time-Protocol 약자로 실시간 데이터 전송 프로토콜

- 타임스탬프방식 ( **불규칙하게 수신되는 데이터를 순서대로 정렬 )**
- UDP프로토콜 기반
- ALF방식을 사용 (ALF: 프로토콜의 동작이 응용 프로그램의 라이브러리 형태로 구현), 프로토콜 내부에 위치하는 버퍼의 크기를 각 프로그램 마다 별도로 관리
- 유니캐스트 , 멀티 캐스트 지원 (**유니 캐스팅** : TCP를 기반으로 다른 하나의 송신자에게 데이터를 전송하는 방식, MAC주소 기반 상대측 IP주소로 보내는 일대일 통신 방식 / **멀티 캐스팅** : UDP 기반으로 하나 이상의 송신자들이 하나이상의 수신자들에게 데이터를 전송하는 방식, D클래스 IP주소 기반)
- 실시간 영상 스트리밍 서비스, 다자간 영상/음성 회의 가능
- RTP릴레이 기능 지원

\*릴레이 - 데이터 전송 과정에서 송수신 프로세스가 직접 데이터를 전송 할 수 없는 상황인 방화벽 사용이나 데이터 형식이 상이한 경우 데이터를 중개하는 기능

### 두 종류의 RTP 릴레이

1. **믹서**

   - 여러 송신 프로세스의 데이터그램을 적절히 조합하여 새로운 데이터그램을 생성한다.

   ex) 영상과 음성을 믹싱하여 새로운 동영상을 만드는것

2. **트랜슬레이터**
   - 입력된 각 RTP 데이터그램을 하나 이상의 출력용 데이터그램으로 만들어 주는것
   - 수신자 환경에 맞게 바꾸어 주는 것을 의미한다.

## OSI TP 프로토콜

### **OSI TP(Transport Protocol)**

OSI에서 정의한 TP(Transport Protocol)는 다음과 같이 다섯 개의 클래스로 서비스를 분류하여 지원. 클래스 0이 구조가 가장 단순하고, 클래스 번호가 커질수록 기능이 추가된다.

다섯 개의 클래스로 서비스를 분류하여 지원

- 0, 1은 단일 포트를 지원하기 위한 프로토콜
- 클래스 0은 기본 기능
  - 오류 검출 기능 없이 기본 전송 기능
- 클래스 1은 기본 오류 복구 기능

  - 패킷 손실 확인과 같은 간단한 기본 오류 복구 기능을 지원

- 클래스 2, 3, 4는 목적지에서 다수 포트를 지원하는 멀티플렉싱 기능
- 클래스 2는 멀티플렉싱기능
  - 다수 포트를 지원하는 멀티플렉싱 기능
  - 오류 복구 기능을 지원하지 않음
- 클래스 3은 오류 복구 및 멀티플렉싱
  - 패킷 손실과 같은 간단한 오류를 확인
- 클래스 4는 오류 검출과 오류 복구, 멀티플렉싱을 지원
  - 16비트의 checksum을 이용해 헤더 오류를 확인
  - 데이터그램의 내용이 올바른지에 대한 더 완전한 형태의 오류 복구 기능을 지원

### **OSI TP 서비스 프리미티브**

TP의 서비스 프리미티브에는 연결형과 비연결형이 있다.

연결 서비스는 연결설정과 연결해제를 T-CONNECT와 T-DISCONNECT로 정의

비연결 서비스는 해제과정이 불필요하여 데이터 전송을 위한 T-UNITDATA 프리미티브만 필요.

데이터는 일반데이터인 T-DATA와 긴급데이터인 T-EXPEDITED로 정의됨.

**\*프리미티브** - OSI 7 Layer 및 TCP/IP의 상위 계층과 하위 계층의 서비스 요구, 지시, 응답, 확인 통한 계층 간 통신 기능, 서비스 프리미티브에 의해 상위 계층은 하위 계층의 서비스를 이용하며, 하위 계층은 상위 계층에 서비스를 제공하는 형태
