# 싱글 스레드 & 멀티 스레드

### 소목차

- 싱글 스레드 장점
- 싱글 스레드 단점
- 멀티 스레드 장점
- 멀티 스레드 단점

### **싱글 스레드와 멀티 스레드**

![thread](https://user-images.githubusercontent.com/46212602/177487711-cb529f0e-7f67-4f41-b6dd-954b3ba3c337.png)

# 멀티 스레드

- CPU의 최대 활용을 위해 프로그램의 둘 이상을 동시에 실행하는 기술
- 컨텍스트 스위칭( Context Switching )을 통해서 이뤄진다.

## 멀티 스레드 장점

1. **응답성** : 프로그램의 일부분이 중단되거나 긴 작업을 수행하더라도 프로그램의 수행이 계속 되어 사용자에 대한 응답성이 증가한다. 싱글 스레드는 프로그램 일부분이 중단되거나, 에러가 발생하면 프로그램이 멈춘다.
2. **경제성** : 프로세스 내 자원들과 메모리를 공유하기 때문에 메모리 공간과 시스템 자원 소모가 줄어든다. 스레드 간 통신이 필요한 경우에도 쉽고 프로세스의 context switching과 달리 스레드 간의 context switching은 캐시 메모리를 비울 필요가 없기 때문에 더 빠르다.
3. **멀티프로세서의 활용** : 다중 CPU 구조에서는 각각의 스레드가 다른 프로세서에서 병렬로 수행될 수 있으므로 병렬성이 증가한다.

## 멀티 스레드 단점

1. context switching, 동기화 등으로 인해 싱글 코어 멀티 스레딩일 경우는 싱글 스레드보다 느리다. (스레드 생성 시간이 오버헤드로 작용)
2. 공유하는 자원에 동시에 접근하는 경우, 스레드는 데이터와 힙 영역을 공유하기 때문에 어떤 스레드가 다른 스레드에서 사용 중인 변수나 자료구조에 접근하여 엉뚱한 값을 읽어오거나 수정할 수 있다. ⇒ 동기화가 꼭 필요!
3. 멀티 스레딩을 위해서는 운영체제의 지원이 필요하다.
4. 멀티 스레드 모델은 프로그래밍 난이도가 높고 스레드 수만큼 자원을 많이 사용한다.

# 싱글 스레드

- 하나의 프로세스에 **하나의 메인 스레드만 실행**되는 것

## 싱글 스레드 장점

1. **context switch 작업을 요구하지 않는다.** context switch는 여러 개의 프로세스가 하나의 프로세서를 공유할 때 발생하는 작업으로 많은 비용을 필요로 한다.
2. **자원 접근에 대한 동기화를 신경쓰지 않아도 된다.** 스레드들이 동시에 같은 자원에 접근하지 못하도록 제어해줘야만 하는데 이 작업은 프로그래머에게 많은 노력을 요구하고 비용을 발생시킨다.
3. **단순히 CPU만을 사용하는 계산작업이라면, 오히려 멀티스레드보다 싱글스레드로 프로그래밍하는 것이 더 효율적이다.** 스레드 간의 작업전환(context switching)에 시간이 걸리기 때문이다. 단순히 CPU만을 사용하는 작업은 싱글 스레드가 멀티 스레드보다 빠르다.
4. **프로그래밍 난이도가 쉽고, CPU, 메모리를 적게 사용하며 코스트가 적게 든다.** 반면에, 멀티 스레드 모델은 프로그래밍 난이도가 높다. 또한, 스레드 수만큼 자원을 많이 사용한다.

## 싱글 스레드 단점

1. **여러 개의 CPU를 활용하지 못한다.** 프로세서를 최대한 활용하게 하려면 cluster 모듈을 사용하거나, 외부에서 여러 개의 프로그램 인스턴스를 실행시키는 방법을 사용해야 한다.
2. **연산량이 많은 작업을 하는 경우, 그 작업이 완료되어야 다른 작업을 수행할 수 있다.**
3. **싱글 스레드 모델은 에러 처리를 못하는 경우 멈춘다.** 멀티 스레드 모델은 에러 발생 시 새로운 스레드를 생성하여 극복한다. 다만, 새로운 스레드 생성이나 놀고 있는 스레드 처리에 비용이 발생한다.

### **싱글 코어와 멀티 코어**

- 싱글 코어에서는 싱글 스레드로 두개의 작업을 하는 것이 멀티 스레드보다 빠르다.
- 멀티 코어에서는 멀티 스레드로 두개의 작업을 하는 것이 싱글 스레드보다 빠르다.


**참고문서**

[https://velog.io/@daeseongkim/Node.js-Node.js는-싱글-스레드](https://velog.io/@daeseongkim/Node.js-Node.js%EB%8A%94-%EC%8B%B1%EA%B8%80-%EC%8A%A4%EB%A0%88%EB%93%9C)

[https://haeunyah.tistory.com/81](https://haeunyah.tistory.com/81)
[https://velog.io/@gil0127/싱글스레드Single-thread-vs-멀티스레드-Multi-thread-t5gv4udj](https://velog.io/@gil0127/%EC%8B%B1%EA%B8%80%EC%8A%A4%EB%A0%88%EB%93%9CSingle-thread-vs-%EB%A9%80%ED%8B%B0%EC%8A%A4%EB%A0%88%EB%93%9C-Multi-thread-t5gv4udj)
