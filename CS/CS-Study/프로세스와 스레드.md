# 프로세스와 스레드

### 소목차

- 프로세스가 뭔가요?
- 스레드가 뭔가요?
- 프로세스와 스레드는 어떤 차이가 있나요?
  - 멀티 태스킹, 멀티 프로그래밍, 멀티 스레드, 멀티 프로세서
  - 하나의 프로그램은 여러개의 프로세스를 가질 수 있는가?

```
Process: 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램을 말한다. 종종 스케줄링의 대상이 되는 작업(task)이라는 용어와 거의 같은 의미로 쓰인다.

Thread: 어떠한 프로그램 내에서, 특히 프로세스 내에서 실행되는 흐름의 단위를 말한다.
```

### ✅ **프로그램 - 정적인 상태**

- 어떤 데이터를 사용해서 어떤 작업을 할지 절차들을 담은 실행할 수 있는 파일을 의미.
- 저장장치(하드디스크)에 저장되어 있어 그 자체로는 정적인 파일.
- 프로세스와 프로그램의 주요 차이점은 **실제 작동하는 상태(동적인지, 정적인지)이냐의 유무**이다.

### ✅ 프로세스 - **OS의 관점에서 하나의 작업단위. (실행 중인 프로그램)**

- 운영체제로부터 자원을 할당받은 작업의 단위.
- 프로그램을 메모리에 올린 동적인 상태를 뜻함.
- **프로그램은 코드 덩어리이고, 그 프로그램을 실행한 것이 프로세스!**
- 프로세스 : 프로그램 + **PCB(Process Control Block, 프로세스 제어 블록)**

✨**PCB** : 운영체제가 프로세스 스케줄링을 위해 프로세스에 관한 모든 정보를 가지고 있는 데이터베이스

### ✅ 스레드 - **CPU 관점에서의 실행 단위.**

- 프로세스가 할당받은 자원을 이용하는 실행 흐름 단위
- 프로세스와 다르게 스레드 간 메모리를 공유

### 📈 **메모리 영역의 관점**

![process](https://user-images.githubusercontent.com/46212602/177486305-1f47a58f-6f10-434b-80fb-1bc0e866590b.png)


- Process에서 Heap, Code, Static Data 영역은 스레드와 공유하고 있음.
- 스레드는 Stack 영역을 독립적으로 소유한다. (기능면에서 독립하기 위함)

### 정적 영역

**Code 영역**

- 실행할 프로그램의 **코드가 저장된 영역**이다. 프로그램의 본문 영역이다.
- CPU는 코드 영역에 저장된 명령어들을 하나씩 처리한다.

**Data 영역**

- 코드에서 선언한 **전역 변수와 정적 변수**가 저장되는 영역이다. (초기화되지 않은 변수는 **BSS**에 저장)
- 코드가 실행되면서 사용하는 변수나 파일 등의 자원을 모아 놓는다.

### 동적 영역

**Stack 영역**

- 프로세스에서 순간적으로 처리해야 하는 정보(함수와 관련)를 위한 임시 메모리 영역이다.
- 함수 안에 선언된 지역변수, 매개변수, 리턴 값, 돌아올 주소 등등이 저장된다.

**Heap 영역**

- 프로그래머가 직접 공간을 할당, 해제하는 메모리 공간이다.
- Java의 경우 new 연산자로 생성된 객체가 Heap 영역을 사용하게 된다.
- FIFO로 가장 먼저 들어온 데이터가 가장 먼저 인출되는 방식을 가진다.
- 메모리의 관점에서 보면 낮은 주소에서 높은 주소의 방향으로 할당된다.

### 💥 **프로세스와 스레드의 차이점**

- **오류 발생 시**
  - 한 프로세스에서 오류 발생 시 ⇒ 공유하고 있는 파일을 손상시키는 경우가 아니라면 아무런 영향이 없다.
  - 한 스레드에서 오류 발생 시 ⇒ **코드 / 데이터 / 힙**을 공유하고 있기 때문에 같은 프로세스 내 모든 스레드가 강제로 종료된다.
- **최소 작업 단위**
  - 프로세스 : **운영체제** 관점에서의 최소 작업 단위
  - 스레드 : **CPU** 관점에서의 최소 작업 단위

### **멀티 프로세싱**

- 다수의 프로세서가 협력적으로 일을 처리하는 것을 의미.
- 보통 하나의 프로세서(CPU)가 하나의 작업을 맡지만 멀티 프로세싱은 다수의 프로세서가 다수의 작업을 함께 처리하는 것을 의미한다.
- 하나의 프로세서가 고장이 나더라도 해당 프로세서가 진행 중인 작업은 다른 프로세서에서 수행하고 있기 때문에 작업이 정지되지 않는다.

### **멀티 프로그래밍**

- 하나의 프로세서가 하나의 프로세스를 수행하는 동안 다른 프로세스에 접근할 수 있도록 하는 방법을 의미한다.
- 입출력이 완료될 때까지 기다리는 시간을 버리지 말고 다른 프로세스를 처리할 수 있도록 해준다.

### **멀티 태스킹**

- 다수의 작업(Task)을 운영체제의 스케줄링에 의해 번갈아 가며 수행되도록 해주는 것을 의미
- 멀티 태스킹의 스케줄링 방식은 **멀티 프로그래밍 방식(Multi-programming)**, **시분할 방식(Time-sharing)**, **실시간 시스템 방식(Realtime)** 용하여 수행
  - **시분할 방식**: CPU의 전체 사용 시간을 작은 작업 시간량으로 분할하여 그 시간량 동안 작업에게 번갈아가며 CPU를 할당해 주는 방식을 의미한다.
  - **실시간 시스템 방식**: 말 그대로 실시간으로 처리해 주는 것을 의미한다.

### **멀티 스레딩**

- 하나의 프로세스를 다수의 스레드로 구분하여 자원을 공유하고 자원의 생성과 관리의 중복성을 최소화하여 수행 능력을 향상시키는 것을 의미한다.
- 하나의 프로세스가 동시에 여러 개의 스레드를 수행할 수 있도록 해주는 것이다. 프로세스에 다수의 스레드를 생성하여 병렬처리하는 것이다.

**크롬** ⇒ 멀티 프로세스 방식 선택, 멀티 스레드방식이 성능이 더 좋지만 멀티 프로세스 방식이 더 보안적으로 좋음

**참고글**

[https://doorbw.tistory.com/26](https://doorbw.tistory.com/26)

[https://sorjfkrh5078.tistory.com/56](https://sorjfkrh5078.tistory.com/56)

[https://velog.io/@raejoonee/프로세스와-스레드의-차이](https://velog.io/@raejoonee/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80-%EC%8A%A4%EB%A0%88%EB%93%9C%EC%9D%98-%EC%B0%A8%EC%9D%B4)

[https://preamtree.tistory.com/10](https://preamtree.tistory.com/10)

[https://murphymoon.tistory.com/entry/프로세스Process와-스레드Thread의-차이점-운영체제OS-면접-질문-1](https://murphymoon.tistory.com/entry/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4Process%EC%99%80-%EC%8A%A4%EB%A0%88%EB%93%9CThread%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9COS-%EB%A9%B4%EC%A0%91-%EC%A7%88%EB%AC%B8-1)

[https://velog.io/@tanger2ne/기술-인터뷰-프로세스Process와-스레드Thread](https://velog.io/@tanger2ne/%EA%B8%B0%EC%88%A0-%EC%9D%B8%ED%84%B0%EB%B7%B0-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4Process%EC%99%80-%EC%8A%A4%EB%A0%88%EB%93%9CThread)

[https://github.com/WeareSoft/tech-interview/blob/master/contents/os.md#프로세스와-스레드의-차이](https://github.com/WeareSoft/tech-interview/blob/master/contents/os.md#%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80-%EC%8A%A4%EB%A0%88%EB%93%9C%EC%9D%98-%EC%B0%A8%EC%9D%B4)

[https://github.com/WeareSoft/tech-interview/blob/master/contents/os.md#멀티-프로세스-대신-멀티-스레드를-사용하는-이유](https://github.com/WeareSoft/tech-interview/blob/master/contents/os.md#%EB%A9%80%ED%8B%B0-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EB%8C%80%EC%8B%A0-%EB%A9%80%ED%8B%B0-%EC%8A%A4%EB%A0%88%EB%93%9C%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0)

[http://ihome911softtech.blogspot.com/2010/10/blog-post_7858.html](http://ihome911softtech.blogspot.com/2010/10/blog-post_7858.html)
